<h2>My Stamp Collection</h2>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<table class="table table-striped">
  <thead>
    <tr>
      <th>Actions</th>
      <th (click)="sortData('stampType')">Stamp Type
        <i *ngIf="sortColumn === 'stampType'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th (click)="sortData('releaseYear')">Released Year
        <i *ngIf="sortColumn === 'releaseYear'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th (click)="sortData('dateOfIssue')">Released Date
        <i *ngIf="sortColumn === 'dateOfIssue'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th (click)="sortData('name')">Name
        <i *ngIf="sortColumn === 'name'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th (click)="sortData('stampSubHeader')">Sub Header
        <i *ngIf="sortColumn === 'stampSubHeader'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th (click)="sortData('specificStampDetails')">Specific Details
        <i *ngIf="sortColumn === 'specificStampDetails'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th (click)="sortData('celebratingYear')">Celebrating Year
        <i *ngIf="sortColumn === 'celebratingYear'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th (click)="sortData('value')">Value (â‚¹)
        <i *ngIf="sortColumn === 'value'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      
      <th (click)="sortData('location')">Location
        <i *ngIf="sortColumn === 'location'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th (click)="sortData('categoryType1')">Category Type 1
        <i *ngIf="sortColumn === 'categoryType1'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th (click)="sortData('categoryType2')">Category Type 2
        <i *ngIf="sortColumn === 'categoryType2'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      
      
      <th (click)="sortData('createdAt')">Created At
        <i *ngIf="sortColumn === 'createdAt'" class="bi" [class.bi-arrow-up]="sortDirection === 'asc'" [class.bi-arrow-down]="sortDirection === 'desc'"></i>
      </th>
      <th>Reference</th>
    </tr>
    <tr>
      <td></td> <!-- Actions column - no filter -->
      <td>
        <select class="form-control" [(ngModel)]="filters.stampType" (change)="applyFilters()">
          <option *ngFor="let option of stampTypeOptions" [value]="option">{{ option }}</option>
        </select>
      </td>
      <td><input type="number" class="form-control" [(ngModel)]="filters.releaseYear" (input)="applyFilters()" placeholder="Year"></td>
      <td><input type="date" class="form-control" [(ngModel)]="filters.dateOfIssue" (input)="applyFilters()"></td>
      <td><input type="text" class="form-control" [(ngModel)]="filters.name" (input)="applyFilters()" placeholder="Name"></td>
      <td><input type="text" class="form-control" [(ngModel)]="filters.stampSubHeader" (input)="applyFilters()" placeholder="Sub Header"></td>
      <td><input type="text" class="form-control" [(ngModel)]="filters.specificStampDetails" (input)="applyFilters()" placeholder="Specific Details"></td>
      <td><input type="text" class="form-control" [(ngModel)]="filters.celebratingYear" (input)="applyFilters()" placeholder="Celebrating Year"></td>
      <td><input type="number" class="form-control" [(ngModel)]="filters.value" (input)="applyFilters()" placeholder="Value"></td>
      <td><input type="text" class="form-control" [(ngModel)]="filters.location" (input)="applyFilters()" placeholder="Location"></td>
      <td>
        <select class="form-control" [(ngModel)]="filters.categoryType1" (change)="applyFilters()">
          <option *ngFor="let option of categoryOptions" [value]="option">{{ option }}</option>
        </select>
      </td>
      <td>
        <select class="form-control" [(ngModel)]="filters.categoryType2" (change)="applyFilters()">
          <option *ngFor="let option of categoryOptions" [value]="option">{{ option }}</option>
        </select>
      </td>
      <td><input type="date" class="form-control" [(ngModel)]="filters.createdAt" (input)="applyFilters()"></td>
      <td></td> <!-- Reference column - no filter -->
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let stamp of stamps">
      <td>
        <a [routerLink]="['/stamps', stamp.id]"><i class="bi bi-eye-fill" style="color: #17a2b8;"></i></a><br>
        <button (click)="confirmDelete(stamp)" style="background: none; border: none; padding: 0; cursor: pointer;"><i class="bi bi-trash-fill" style="color: #dc3545;"></i></button>
      </td>
      <td>{{ stamp.stampType }}</td>
      <td>{{ stamp.releaseYear }}</td>
      <td>{{ stamp.dateOfIssue | date: 'dd MMM yyyy' }}</td>
      <td>{{ stamp.name }}</td>
      <td>{{ stamp.stampSubHeader }}</td>
      <td>{{ stamp.specificStampDetails }}</td>
      <td>{{ stamp.celebratingYear }}</td>
      <td>{{ stamp.value }}</td>
      
      <td>{{ stamp.location }}</td>
      <td>{{ stamp.categoryType1 }}</td>
      <td>{{ stamp.categoryType2 }}</td>
      
      
      <td>{{ stamp.createdAt | date:'medium' }}</td>
      <td>
        <a *ngIf="stamp.referenceLinks && stamp.referenceLinks.length > 0" [href]="stamp.referenceLinks[0]" target="_blank" class="btn btn-secondary btn-sm">
          <i class="bi bi-link-45deg"></i>
        </a>
      </td>
    </tr>
  </tbody>
</table>